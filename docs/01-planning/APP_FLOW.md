# 🔄 Stock Study 애플리케이션 플로우

> 앱이 어떻게 동작하는지 한눈에 보기

## 📊 전체 플로우 다이어그램

```
┌─────────────────────────────────────────────────────────────────┐
│                         사용자 여정                               │
└─────────────────────────────────────────────────────────────────┘

         START
           │
           ▼
    ┌─────────────┐
    │  홈페이지   │
    │  (/)        │
    └──────┬──────┘
           │
           ▼
    ┌─────────────┐
    │ 계정이 있나요?│
    └──────┬──────┘
           │
      ┌────┴────┐
      │         │
     NO        YES
      │         │
      ▼         ▼
┌──────────┐ ┌──────────┐
│ 회원가입  │ │  로그인  │
│/register │ │ /login   │
└────┬─────┘ └────┬─────┘
     │            │
     └─────┬──────┘
           │
           ▼
    ┌──────────────┐
    │  대시보드     │
    │  /dashboard  │
    └───────┬──────┘
            │
      ┌─────┴─────┐
      │           │
      ▼           ▼
┌──────────┐ ┌───────────┐
│스터디 있음│ │스터디 없음│
└────┬─────┘ └─────┬─────┘
     │             │
     │        ┌────┴────┐
     │        │         │
     │        ▼         ▼
     │   ┌────────┐ ┌────────┐
     │   │새로만들기│ │참여하기│
     │   │/create │ │ /join  │
     │   └───┬────┘ └───┬────┘
     │       └─────┬────┘
     │             │
     └─────┬───────┘
           │
           ▼
    ┌──────────────┐
    │ 스터디 활동   │
    │ - 과제하기   │
    │ - 댓글달기   │
    │ - 진행상황   │
    └──────┬───────┘
           │
           ▼
        END
```

---

## 🎯 주요 사용자 시나리오

### 시나리오 1: 새로운 사용자 (처음 방문)

```
┌─────────────────────────────────────────────────────┐
│ 1. 홈페이지 접속                                      │
│    http://localhost:3090                            │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 2. 회원가입 페이지로 이동                             │
│    http://localhost:3090/register                   │
│    ┌─────────────────────────────────────┐         │
│    │ • 이메일 입력                        │         │
│    │ • 사용자명 입력                      │         │
│    │ • 비밀번호 입력                      │         │
│    │ • 비밀번호 확인                      │         │
│    │ • [회원가입] 버튼 클릭              │         │
│    └─────────────────────────────────────┘         │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 3. 자동으로 로그인 페이지로 리다이렉트               │
│    http://localhost:3090/login                      │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 4. 로그인                                            │
│    • 이메일/사용자명 + 비밀번호 입력                │
│    • [로그인] 버튼 클릭                             │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 5. 대시보드로 이동                                   │
│    http://localhost:3090/dashboard                  │
└─────────────────────────────────────────────────────┘
```

### 시나리오 2: 스터디 그룹 만들기

```
┌─────────────────────────────────────────────────────┐
│ 1. 대시보드에서 시작                                 │
│    http://localhost:3090/dashboard                  │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 2. "Create Study" 클릭 또는 직접 접속               │
│    http://localhost:3090/studies/create             │
│    ┌─────────────────────────────────────┐         │
│    │ • 스터디 이름                        │         │
│    │ • 설명 (선택)                        │         │
│    │ • 책 제목                            │         │
│    │ • 시작 날짜                          │         │
│    │ • 종료 날짜 (15일 후)               │         │
│    │ • 최대 인원                          │         │
│    │ • [Create Study] 버튼 클릭          │         │
│    └─────────────────────────────────────┘         │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 3. 스터디 생성 완료                                  │
│    • 초대 코드 받기 (예: ABC12345)                  │
│    • 초대 코드를 친구들에게 공유                    │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 4. 대시보드로 자동 이동                              │
│    • 새로 만든 스터디 정보 표시                     │
└─────────────────────────────────────────────────────┘
```

### 시나리오 3: 스터디에 참여하기

```
┌─────────────────────────────────────────────────────┐
│ 1. 친구에게 초대 코드 받기                           │
│    예: ABC12345                                     │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 2. 스터디 참여 페이지로 이동                         │
│    http://localhost:3090/studies/join               │
│    ┌─────────────────────────────────────┐         │
│    │ • 초대 코드 입력                     │         │
│    │ • [Join Study] 버튼 클릭            │         │
│    └─────────────────────────────────────┘         │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 3. 참여 완료                                         │
│    • 스터디 멤버로 등록                             │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 4. 대시보드로 자동 이동                              │
│    • 참여한 스터디 정보 표시                        │
└─────────────────────────────────────────────────────┘
```

### 시나리오 4: 일일 과제 수행

```
┌─────────────────────────────────────────────────────┐
│ 1. 대시보드 접속                                     │
│    http://localhost:3090/dashboard                  │
│    • 오늘의 과제 확인                               │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 2. "Start Assignment" 클릭                          │
│    http://localhost:3090/studies/[studyId]/day/[N]  │
│    ┌─────────────────────────────────────┐         │
│    │ Day N 과제 페이지                    │         │
│    │ • 학습 목표 읽기                     │         │
│    │ • 과제 문제 확인                     │         │
│    └─────────────────────────────────────┘         │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 3. 과제 작성 및 제출                                 │
│    • 각 질문에 답변 작성                            │
│    • [Submit] 버튼 클릭                             │
└────────────────┬────────────────────────────────────┘
                 │
                 ▼
┌─────────────────────────────────────────────────────┐
│ 4. 제출 완료                                         │
│    • 진행률 업데이트                                │
│    • 친구들 과제 보기 가능                          │
└─────────────────────────────────────────────────────┘
```

---

## 🔐 인증 플로우

```
┌──────────────────────────────────────────────────┐
│              인증 상태 체크                        │
└───────────────┬──────────────────────────────────┘
                │
         ┌──────┴──────┐
         │             │
    로그인 O      로그인 X
         │             │
         ▼             ▼
  ┌──────────┐   ┌──────────┐
  │ 보호된    │   │ 로그인    │
  │ 페이지    │   │ 페이지로  │
  │ 접근 허용 │   │ 리다이렉트│
  └──────────┘   └──────────┘

보호된 페이지:
• /dashboard
• /studies (일부)
• /mypage
• /studies/create
• /studies/[studyId]/day/[dayNumber]

공개 페이지:
• / (홈)
• /login
• /register
```

---

## 📱 페이지별 상세 플로우

### 로그인 페이지 (/login)

```
입력:
┌─────────────────────────────┐
│ Email/Username              │ ← 이메일 또는 사용자명
├─────────────────────────────┤
│ Password                    │ ← 비밀번호
└─────────────────────────────┘
         ▼
    [로그인] 버튼
         │
    ┌────┴────┐
    │         │
 성공 ✓     실패 ✗
    │         │
    ▼         ▼
 대시보드   에러 메시지
 (/dashboard) "이메일 또는 비밀번호가
              틀렸습니다"
```

### 회원가입 페이지 (/register)

```
입력:
┌─────────────────────────────┐
│ Email                       │ ← 이메일 (unique)
├─────────────────────────────┤
│ Username                    │ ← 사용자명 (unique)
├─────────────────────────────┤
│ Password                    │ ← 비밀번호 (6자 이상)
├─────────────────────────────┤
│ Confirm Password            │ ← 비밀번호 확인
└─────────────────────────────┘
         ▼
  [회원가입] 버튼
         │
    ┌────┴────┐
    │         │
 성공 ✓     실패 ✗
    │         │
    ▼         ▼
 로그인 페이지  에러 메시지
 (/login)    "이미 사용 중인
              이메일입니다"
```

### 대시보드 (/dashboard)

```
표시 정보:
┌─────────────────────────────────────────────┐
│ Welcome back, [사용자명]                     │
├─────────────────────────────────────────────┤
│ ┌─────────────────┐  ┌──────────────────┐ │
│ │ 스터디 개요      │  │ 내 통계          │ │
│ │ • 스터디 이름    │  │ • 제출 횟수      │ │
│ │ • 책 제목        │  │ • 받은 댓글      │ │
│ │ • 진행률         │  │                  │ │
│ │ • 초대 코드      │  │                  │ │
│ └─────────────────┘  └──────────────────┘ │
├─────────────────────────────────────────────┤
│ 오늘의 과제                                  │
│ ┌─────────────────────────────────────────┐│
│ │ Day 5: Financial Statements Analysis    ││
│ │ • 학습 목표                              ││
│ │ • 챕터 정보                              ││
│ │ [Start Assignment]                       ││
│ └─────────────────────────────────────────┘│
└─────────────────────────────────────────────┘

액션:
• [View Details] → 스터디 상세 페이지
• [Start Assignment] → 과제 페이지
```

### 스터디 목록 (/studies)

```
표시:
┌─────────────────────────────────────────────┐
│ My Studies                                  │
├─────────────────────────────────────────────┤
│ [+ Create New Study]  [Join Study]          │
├─────────────────────────────────────────────┤
│ ┌─────────────────────────────────────────┐│
│ │ January Stock Study                      ││
│ │ Book: Stock Investment for Beginners     ││
│ │ Progress: 33% (5/15 days)                ││
│ │ [View] [Continue]                        ││
│ └─────────────────────────────────────────┘│
│ ┌─────────────────────────────────────────┐│
│ │ February Stock Study                     ││
│ │ Book: Advanced Trading                   ││
│ │ Progress: 0% (0/15 days)                 ││
│ │ [View] [Continue]                        ││
│ └─────────────────────────────────────────┘│
└─────────────────────────────────────────────┘

액션:
• [Create New Study] → /studies/create
• [Join Study] → /studies/join
• [View] → /studies/[studyId]
• [Continue] → /studies/[studyId]/day/[currentDay]
```

---

## 🔄 데이터 흐름

### 사용자 등록 프로세스

```
Client                 Server              Firebase
  │                      │                    │
  │ POST /register       │                    │
  ├─────────────────────>│                    │
  │  { email,            │  Create User       │
  │    username,         ├───────────────────>│
  │    password }        │                    │
  │                      │  ✓ User Created    │
  │                      │<───────────────────│
  │                      │                    │
  │                      │  Store Profile     │
  │                      ├───────────────────>│
  │                      │  (Firestore)       │
  │                      │  ✓ Stored          │
  │                      │<───────────────────│
  │  ✓ 200 OK            │                    │
  │<─────────────────────│                    │
  │  { success: true }   │                    │
  │                      │                    │
  │ Redirect to /login   │                    │
```

### 로그인 프로세스

```
Client                 Server              Firebase
  │                      │                    │
  │ POST /login          │                    │
  ├─────────────────────>│                    │
  │  { email,            │  Authenticate      │
  │    password }        ├───────────────────>│
  │                      │                    │
  │                      │  ✓ Token           │
  │                      │<───────────────────│
  │                      │                    │
  │  ✓ 200 OK            │                    │
  │<─────────────────────│                    │
  │  { token,            │                    │
  │    user }            │                    │
  │                      │                    │
  │ Store token          │                    │
  │ (localStorage)       │                    │
  │                      │                    │
  │ Redirect to          │                    │
  │ /dashboard           │                    │
```

### 스터디 생성 프로세스

```
Client                 Server              Firestore
  │                      │                    │
  │ POST /studies        │                    │
  ├─────────────────────>│                    │
  │  { studyName,        │                    │
  │    bookTitle,        │  Generate          │
  │    dates,            │  Invite Code       │
  │    maxMembers }      │  (ABC12345)        │
  │                      │                    │
  │                      │  Create Study      │
  │                      ├───────────────────>│
  │                      │  Collection        │
  │                      │                    │
  │                      │  ✓ Study ID        │
  │                      │<───────────────────│
  │                      │                    │
  │                      │  Add Owner as      │
  │                      │  Member            │
  │                      ├───────────────────>│
  │                      │  ✓ Added           │
  │                      │<───────────────────│
  │  ✓ 200 OK            │                    │
  │<─────────────────────│                    │
  │  { studyId,          │                    │
  │    inviteCode }      │                    │
  │                      │                    │
  │ Redirect to          │                    │
  │ /dashboard           │                    │
```

---

## 🎨 UI/UX 플로우

### 반응형 디자인

```
Desktop (>768px)         Mobile (<768px)
┌───────────────────┐    ┌──────────┐
│  Header           │    │  Header  │
├─────────┬─────────┤    ├──────────┤
│         │         │    │          │
│ Content │ Sidebar │    │ Content  │
│         │         │    │          │
│         │         │    ├──────────┤
│         │         │    │ Sidebar  │
│         │         │    │ (햄버거  │
│         │         │    │  메뉴)   │
└─────────┴─────────┘    └──────────┘
```

### 다크 모드

```
사용자 시스템 설정 감지
        │
    ┌───┴───┐
    │       │
  Light   Dark
    │       │
    ▼       ▼
  ☀️      🌙
밝은 테마 어두운 테마
```

---

## 📊 상태 관리

### AuthContext 플로우

```
App 시작
  │
  ▼
┌─────────────────┐
│ AuthContext     │
│ 초기화          │
└────────┬────────┘
         │
         ▼
  Firebase Auth
  상태 확인
         │
    ┌────┴────┐
    │         │
 로그인 O  로그인 X
    │         │
    ▼         ▼
  User      null
  Object
    │         │
    │         ▼
    │    Redirect to
    │    /login
    ▼
  Continue
  to protected
  pages
```

---

## ⚡ 성능 최적화

### 로딩 전략

```
Initial Load
    │
    ├─> Critical CSS (인라인)
    ├─> Main Bundle (우선)
    ├─> Firebase SDK (비동기)
    └─> Images (lazy loading)
         │
         ▼
    Subsequent Navigation
    (빠른 페이지 전환)
```

---

## 🔔 에러 처리 플로우

```
사용자 액션
    │
    ▼
 요청 발생
    │
    ├─> 네트워크 에러
    │   └─> "인터넷 연결을 확인하세요"
    │
    ├─> 인증 에러
    │   └─> 로그인 페이지로 리다이렉트
    │
    ├─> 권한 에러
    │   └─> "접근 권한이 없습니다"
    │
    └─> 서버 에러
        └─> "잠시 후 다시 시도하세요"
```

---

## 🎯 15일 학습 사이클

```
Day 1                Day 15
  │                    │
  ├─> 스터디 시작       ├─> 스터디 완료
  │                    │
  ├─> 과제 제출        ├─> 최종 리뷰
  │                    │
  ├─> 동료 리뷰        ├─> 성과 확인
  │                    │
  └─> 다음 날          └─> 축하! 🎉
      │
      ▼
  반복 (Day 2-14)
```

---

## 📈 진행률 계산

```
진행률 = (완료한 일수 / 전체 일수) × 100%

예시:
• 5일째 / 15일 = 33.33% → 33%
• 10일째 / 15일 = 66.66% → 67%
• 15일째 / 15일 = 100% → 100% ✓
```

---

이 문서는 Stock Study 15-Day Tracker의 전체 플로우를 설명합니다.
더 자세한 사용법은 **USER_GUIDE.md**를 참고하세요!
